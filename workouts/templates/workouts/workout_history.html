{% extends "base.html" %}

{% block title %}Workout History{% endblock %}

{% block content %}
<h1 style="margin-bottom: 20px;">Workout History</h1>

{% for workout in workouts %}
<a href="/workout/{{ workout.date|date:'Y-m-d' }}/" style="text-decoration: none; color: inherit; display: block;"></a>
    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <h3>
                <a href="/workout/{{ workout.date|date:'Y-m-d' }}/" style="color: #2563eb; text-decoration: none;">
                    {{ workout.date }}
                </a>
            </h3>
            <span style="color: #888; font-size: 14px;">{{ workout.sets.count }} sets</span>
        </div>
</a>
    {% if workout.notes %}
        <p style="color: #666; margin: 5px 0;">{{ workout.notes }}</p>
    {% endif %}

    {% regroup workout.sets.all by exercise as exercise_groups %}
    {% for group in exercise_groups %}
        <div style="margin-top: 10px;">
            <strong style="color: #333;">{{ group.grouper.name }}</strong>
            <ul style="list-style: none; padding: 0; margin-top: 4px;">
            {% for s in group.list %}
                <li style="color: #666; font-size: 14px; padding: 2px 0;">
                    Set {{ s.set_number }}: {{ s.reps }} reps @ {{ s.weight }}kg
                </li>
            {% endfor %}
            </ul>
        </div>
    {% endfor %}
</div>
{% empty %}
<p style="color: #888;">No workouts logged yet.</p>
{% endfor %}

<div style="margin-top: 10px;">
    <a href="{% url 'dashboard' %}" class="btn" style="background: #6b7280;">‚Üê Back to Dashboard</a>
</div>
{% endblock %}